---
title: Codeforces Educational Codeforces Round 139 (Rated for Div. 2)
date: 2022-12-12
tags: [网络流,费用流]
category: [Codeforces]
description: F(费用流)
---

https://codeforces.com/contest/1766

# F. MCF

n 点 m边 网络求一个最大流,最小费用 方案

且满足每条边上 实际流 与 其容量 奇偶性一致

输出方案, 或不存在

## 范围

n 100

m 200

容量 [1,100]

单位代价 wi [-100,100]

## 我的思路

想着把奇数处理掉, 剩下就是容量处以2, 费用乘以2的问题了

但不会处理奇数, 想到可以每个点出度入度, 但具体也不会

## 题解

一样, 也是如果处理了奇数, 偶数就好办了

考虑 2k+1, 拆成 2k容量和 1容量的,且1容量的强制跑满(所以实际不需要建立这条1容量的边, 然后所有容量除以2)

// 这有个问题就是 这些指定跑满的流的来源 和 去向

如何具体的去除 "1容量"的边, 还真和点有关系, 计算点和 容量1的边的连接个数 是否是偶数!!!!!!!!!!!! 否则不可能有方案(源和汇例外, 但 源汇肯定需要同奇偶, 为了简化判断, 在源为奇数个1边相连时,还可以加一条 源到汇的 1容量 0单位代价的 边 )

// 我还想了半天 奇的流导致 偶的容量 剩余变成奇数........ 傻了

对于每个点, 考虑 多少 excess flow (多少个奇数入弧), 如果直接删掉这些1边, 那么这个容量(必须满的流量)也会消失,

额外增加新的 源和汇 S,T, 这样把 excess flow 转换成 S -> 点,(注意要除以2), 同样 奇出度 换成 点 -> t

方案1 增加 `n -> 1` 无限容量的边 like "flow with lower bounds"???? 这个需要你注意负环的问题

方案2 增加 `s -> 1`, `n -> t`的无限容量, 然后让 单流代价 -1e9, 然后对 `s -> t` 做 最大流最小费用

// 好怪啊, 这样拆 合理性呢



### flow with lower bounds





# 总结

F

没学过 flow with lower bounds 要怎么搞


# 参考

[官方](https://codeforces.com/blog/entry/109468)

