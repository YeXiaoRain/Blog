<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/Blog/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/Blog/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/Blog/images/favicon-16x16.png">
  <link rel="mask-icon" href="/Blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/Blog/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yexiaorain.github.io","root":"/Blog/","images":"/Blog/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":null,"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"},"path":"/Blog/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/Blog/js/config.js"></script>

    <meta name="description" content="G(概率论)H(二分,树)I(TODO)">
<meta property="og:type" content="article">
<meta property="og:title" content="Codeforces Global Round 25">
<meta property="og:url" content="https://yexiaorain.github.io/Blog/cf/1951/index.html">
<meta property="og:site_name" content="YeXiaoRain Blog(hexo的搜索高亮会破坏latex)">
<meta property="og:description" content="G(概率论)H(二分,树)I(TODO)">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2024-04-05T16:00:00.000Z">
<meta property="article:modified_time" content="2025-04-21T09:17:42.639Z">
<meta property="article:author" content="Xiao Ye">
<meta property="article:tag" content="二分">
<meta property="article:tag" content="树">
<meta property="article:tag" content="概率论">
<meta name="twitter:card" content="&lt;twitter:card&gt;">


<link rel="canonical" href="https://yexiaorain.github.io/Blog/cf/1951/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-TW","comments":true,"permalink":"https://yexiaorain.github.io/Blog/cf/1951/","path":"cf/1951/","title":"Codeforces Global Round 25"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Codeforces Global Round 25 | YeXiaoRain Blog(hexo的搜索高亮会破坏latex)</title>
  








  <noscript>
    <link rel="stylesheet" href="/Blog/css/noscript.css">
  </noscript>
<link rel="alternate" href="/Blog/atom.xml" title="YeXiaoRain Blog(hexo的搜索高亮会破坏latex)" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/Blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">YeXiaoRain Blog(hexo的搜索高亮会破坏latex)</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜尋" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/Blog/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li><li class="menu-item menu-item-archives"><a href="/Blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔<span class="badge">336</span></a></li><li class="menu-item menu-item-yearmonth"><a href="/Blog/yearmonth/" rel="section"><i class="fa fa-calendar-days fa-fw"></i>年月</a></li><li class="menu-item menu-item-categories"><a href="/Blog/categories/" rel="section"><i class="fa fa-shapes fa-fw"></i>分類<span class="badge">19</span></a></li><li class="menu-item menu-item-tags"><a href="/Blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤<span class="badge">319</span></a></li><li class="menu-item menu-item-rss"><a href="/Blog/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>rss</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#G-Clacking-Balls-2s-256mb"><span class="nav-text">G Clacking Balls(2s,256mb)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%91%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="nav-text">我的思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E8%A7%A3"><span class="nav-text">题解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#H-Thanos-Snap-3s-512mb"><span class="nav-text">H Thanos Snap(3s,512mb)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%91%E7%9A%84%E6%80%9D%E8%B7%AF-1"><span class="nav-text">我的思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E8%A7%A3-1"><span class="nav-text">题解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">总结</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Xiao Ye"
      src="https://avatars.githubusercontent.com/u/7298239?v=4">
  <p class="site-author-name" itemprop="name">Xiao Ye</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/Blog/archives/">
          <span class="site-state-item-count">336</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/Blog/categories/">
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/Blog/tags/">
        <span class="site-state-item-count">319</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/yexiaorain" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yexiaorain" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yexiaorain@gmail.com" title="E-Mail → mailto:yexiaorain@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://atcoder.jp/users/cromarmot" title="https:&#x2F;&#x2F;atcoder.jp&#x2F;users&#x2F;cromarmot" rel="noopener" target="_blank">AtCoder</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://codeforces.com/profile/YeXiaoRain" title="https:&#x2F;&#x2F;codeforces.com&#x2F;profile&#x2F;YeXiaoRain" rel="noopener" target="_blank">Codeforces</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://yexiaorain.github.io/Blog/cf/1951/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/7298239?v=4">
      <meta itemprop="name" content="Xiao Ye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YeXiaoRain Blog(hexo的搜索高亮会破坏latex)">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Codeforces Global Round 25 | YeXiaoRain Blog(hexo的搜索高亮会破坏latex)">
      <meta itemprop="description" content="G(概率论)H(二分,树)I(TODO)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Codeforces Global Round 25
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2024-04-06 00:00:00" itemprop="dateCreated datePublished" datetime="2024-04-06T00:00:00+08:00">2024-04-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2025-04-21 17:17:42" itemprop="dateModified" datetime="2025-04-21T17:17:42+08:00">2025-04-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/Codeforces/" itemprop="url" rel="index"><span itemprop="name">Codeforces</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/Codeforces/Div1-2/" itemprop="url" rel="index"><span itemprop="name">Div1+2</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/cf/1951/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="cf/1951/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>3k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>10 分鐘</span>
    </span>
</div>

            <div class="post-description">G(概率论)H(二分,树)I(TODO)</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p><a target="_blank" rel="noopener" href="https://codeforces.com/contest/1951">https://codeforces.com/contest/1951</a></p>
<h2 id="G-Clacking-Balls-2s-256mb"><a href="#G-Clacking-Balls-2s-256mb" class="headerlink" title="G Clacking Balls(2s,256mb)"></a>G Clacking Balls(2s,256mb)</h2><p>1~m篮子 顺时针 环</p>
<p>n个球，第i个在 篮子ai中，每个篮子至多1个球</p>
<p>alice 可以进行1s操作</p>
<ul>
<li><code>[1,n]</code>等概率 选i</li>
<li>如果 球已经不存在，则跳过（依然耗时）</li>
<li>如果 球存在，则沿着把球顺时针移动一个篮子，（如果目标篮子有球，把目标篮子中原来的球抛弃）</li>
</ul>
<p>直到只剩下一个球停止，求操作时间的期望值 mod 1e9+7</p>
<p>n 3e5</p>
<p>n,m 1e9</p>
<h3 id="我的思路"><a href="#我的思路" class="headerlink" title="我的思路"></a>我的思路</h3><p>不能说没有想法，只能说一点想法也没有</p>
<p>如果一个球消失，那么说明有前面的球超过了它，换个角度 如果 球i移动 导致球j消失，也就是i走到j的位置，那么换成i消失是等价的后续，不影响概率</p>
<p>所以转换了题意的第三条（谁移动谁消失）以后</p>
<p>如果说 最后剩下的是 第i个球，那么这个球没有触碰下一个球，而前面的所有球触碰了后一个球</p>
<p>所以是个min&#x2F;max 容斥+期望 吗？</p>
<p>计算每个球的 消失(触碰后面球)的期望次数，再min-max 容斥掉?</p>
<p>感觉也不对</p>
<p>再换个角度， 如果i留下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[i-1 ................i] .....</span><br></pre></td></tr></table></figure>

<p>没啥想法，总的来说，显然直接状态描述肯定不行的，不论是点坐标还是距离</p>
<p>那么要么就是孤立每个 间隔的期望什么的，要么就是孤立的什么点期望，总之需要一个办法把其中 关联的东西拆掉，</p>
<p>而且不只如此，还有环</p>
<hr>
<p>然后就是考虑简化的问题， 同样是环，但是只有两个点</p>
<p>那么 Exp(state) &#x3D; Exp(点的距离)</p>
<p>然而转化构成了 一个转化矩阵</p>
<p>$A\lambda&#x3D;\lambda$的形式，已知$A$要求$\lambda$</p>
<hr>
<p>另一个是展开环到无限的数轴，指定目标点，那么得到每个点的移动方案数？</p>
<span id="more"></span>

<h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>这题 的发想来自于一个4年前的 <a target="_blank" rel="noopener" href="https://codeforces.com/contest/1349/problem/D">CF ROUND 641 Div1 D</a>的一个<a target="_blank" rel="noopener" href="https://codeforces.com/blog/entry/77284#comment-620956">戴江齐 的 评论</a></p>
<p>说白了 就是</p>
<p>$E(state)&#x3D;1+\sum_{newstate} p_{newstate}E(newstate)$</p>
<p>然后“猜想，数学直觉”，认为$E(state)&#x3D;\sum_i f(a_i)$, 而这个$f$是任何一个 满足上面 state转换的即可</p>
<p>这样找出任何一个满足上面转换的$f$以后就只需要</p>
<p>$ans &#x3D; E(初始state)-E(结束state)&#x3D;(\sum_i f(a_i))-(\sum_i f(end_i))$</p>
<hr>
<p>剩余$k$个球时</p>
<p>令 $S&#x3D;(d_1,\cdots,d_k)$ 为状态，记录所有点之家你的间隔</p>
<p>$D&#x3D;\sum_{i} d_i$</p>
<p>对于第$i$个长度$\frac{1}{n}$ 概率, $d_i+&#x3D;1,d_{(i+1)\mod k}-&#x3D;1$, 如果后一个变为$0$  从状态中删除这一项，把新状态记作$S_{+\lbrace i\rbrace}$</p>
<p>有$1-\frac{k}{n}$ 什么都不发生，（选中未被删除的球)</p>
<p>终点状态是 $S_{end} &#x3D; (D)$</p>
<p>$E(S_{end})&#x3D;0$, &#x2F;&#x2F; 这里也可以不是0,换成一个新的函数H而不是期望，这样的话 只需要$ans &#x3D; H(S_{start})-H(S_{end})$</p>
<p>$E(S)&#x3D;1+\frac{1}{n}\sum_{i&#x3D;1}^k E(S_{+\lbrace i \rbrace})+(1-\frac{k}{n})E(S)$</p>
<p>整理得到</p>
<p>$kE(S)&#x3D;n+\sum_{i&#x3D;1}^k E(S_{+\lbrace i \rbrace})$</p>
<p>$n&#x3D;\sum_{i&#x3D;1}^k(E(S)-E(S_{+\lbrace i\rbrace}))$</p>
<hr>
<p>上 代江齐 的想法</p>
<p>如果存在 $E(S)&#x3D;C+\sum_{i&#x3D;1}^k\sum_{x&#x3D;0}^{d_i} g(x)$</p>
<p>$n&#x3D;\sum_{i&#x3D;1}^k(E(S)-E(S_{+\lbrace i\rbrace}))$</p>
<p>$&#x3D;\sum_{i&#x3D;1}^k(g(d_{(i\mod k)+1})-g(d_i+1))$, 因为操作<code>&#123;i&#125;</code> 其余的都对应消除掉了，只多剩下$g(d_i+1)$和$g(d_{(i\mod k)+1})$</p>
<p>$&#x3D;\sum_{i&#x3D;1}^k(g(d_i)-g(d_i+1))$, 整理$i$</p>
<hr>
<p>特别的，我们希望$(1,1,1) \to (1,2,0) \to (1,2)$时</p>
<p>希望 $E((1,2,0))&#x3D;E((1,2))$</p>
<p>而左边多一个$g(0)$ 所以，最好$g(0)&#x3D;0$</p>
<p>令 $g(d_i)-g(d_i+1) &#x3D; \frac{n}{D}d_i$, 则满足上式$n&#x3D;\sum_{i&#x3D;1}^{k}(g(d_i)-g(d_i+1))$</p>
<p>$g(x)&#x3D;g(x-1)-\frac{n}{D}(x-1)$</p>
<p>$g(x)&#x3D;-\frac{n}{D}(\sum_{i&#x3D;1}^{x-1} i)&#x3D;-\frac{n}{D}\binom{x}{2}$</p>
<p>$E(S)&#x3D;C+\sum_{i&#x3D;1}^k\sum_{x&#x3D;0}^{d_i} (-\frac{n}{D}\binom{x}{2})&#x3D;C-\frac{n}{D}\sum_{i&#x3D;1}^k\binom{d_i+1}{3}$</p>
<hr>
<p>为了满足$E(S_{end}) &#x3D; 0$</p>
<p>$0&#x3D;C-\frac{n}{D} \binom{D+1}{3}$</p>
<hr>
<p>$ans&#x3D;E(S_{start})&#x3D;\frac{n}{D}\binom{D+1}{3}-\frac{n}{D}\sum_{i&#x3D;1}^k\binom{d_i+1}{3}$</p>
<h2 id="H-Thanos-Snap-3s-512mb"><a href="#H-Thanos-Snap-3s-512mb" class="headerlink" title="H Thanos Snap(3s,512mb)"></a>H Thanos Snap(3s,512mb)</h2><p>给定 $a[2^k]$ 初始是 $[1,2^k]$的一个排列</p>
<p>一个$t\in[1,k]$ 被展示给A和B</p>
<p>score &#x3D; 在t轮后max(a)</p>
<p>每一轮</p>
<p>A：不操作或 选a中两个不同的元素交换, 希望score尽量大</p>
<p>B：a删除左半或右半，希望score尽量小</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for  t=1..k</span><br><span class="line">	print(score for f(a,t))</span><br></pre></td></tr></table></figure>

<p>$k \le 20$</p>
<h3 id="我的思路-1"><a href="#我的思路-1" class="headerlink" title="我的思路"></a>我的思路</h3><p>考虑 剩余轮数会怎么操作,g(a,剩余轮次)</p>
<p>如果剩余0轮，都不操作, g(a,0)&#x3D;max(a)</p>
<p>如果剩余1轮，那么B一定会删除最大的数所在的一半，那么A的任务就是次大的数要和最大的不在同一半即可，g(a,1)&#x3D;次大(a)&#x3D;max(a,2)</p>
<p>用max(a,j) 表示a中第j大的</p>
<p>那么如果剩余2轮，那么B 一定是删除 左右中 max(a_left,2),max(a_right,2)更大的一侧，那么对于A来说，就是要让 max(a_half,2) 小的尽量大</p>
<p>然而这出现了分叉，无法直接判断是a的第多少大的了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1234 5678</span><br><span class="line">那么1次移动 max(左,2) 最大只能是4,而右边 max(右,2) &gt;= 5,</span><br><span class="line"></span><br><span class="line">最有的期望是 max(a,4), 但上述的方法无法达到，而注意到 只要最大的4个不同时在一侧，那么 要么最大四个的分布 只有 1-3,2-2,3-1，都可以通过1次或0次移动让结果是max(a,4)</span><br><span class="line"></span><br><span class="line">所以结果是 min(max(a_left),max(a_right),max(a,4))</span><br></pre></td></tr></table></figure>

<p>感觉无法继续 更多的剩余轮次，因为这里的状态很复杂了</p>
<hr>
<p>另一个角度想就是如果最优为$x$, 我们能否让结果 $\ge v$, 显然在不改变Alice和bob的决策情况下，这是单调的可以二分</p>
<p>那么 以$v$为分界点，Alice和Bob的决策在 新的视角下会怎样</p>
<p>把 $\ge v$的全换成1,$&lt; v$的全换成0</p>
<p>那么, 原来的“最优操作”实际上，Alice和Bob博弈下来就是留下1的个数，而分界点$x-1,x$ 上分别是留下1个1,和完全不留1</p>
<p>所以 原题目 变化为（总感觉数学上没有完全证明这两个等价，但是感觉上是这样的？）</p>
<p>Alice要尽可能保留1,</p>
<p>Bob要尽可能移除1</p>
<p>但这 也注意到 这似乎没有局部贪心？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">11111111 00000000 10101010 1010000</span><br><span class="line">8个1     0个1      4个1      2个1</span><br><span class="line"></span><br><span class="line">如果这时候，Alice选择了左右平衡 两边都变成7个1</span><br><span class="line">那么 Bob, 会选左侧</span><br><span class="line">11111111 00000000</span><br><span class="line"></span><br><span class="line">那么Alice最多让右侧有1个1</span><br><span class="line">Bob会留下</span><br><span class="line">100000000</span><br><span class="line"></span><br><span class="line">alice不论怎么选</span><br><span class="line">Bob会得到</span><br><span class="line">0000</span><br></pre></td></tr></table></figure>

<p>而3次操作来说，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">11111111 00000000 10101010 1010000</span><br><span class="line">8个1     0个1      4个1      2个1</span><br><span class="line"></span><br><span class="line">alice这样操作第一次</span><br><span class="line">11111110 00001000 10101010 1010000</span><br><span class="line">Bob 如果留右侧，</span><br><span class="line">	则alice 可以把右侧变为 10101000 10101000</span><br><span class="line">	Bob =&gt; 10101000</span><br><span class="line">	alice 不操作</span><br><span class="line">	Bob =&gt; 1000</span><br><span class="line"></span><br><span class="line">Bob 如果留左侧</span><br><span class="line">	则 alice =&gt; 11101110 10001000</span><br><span class="line">	Bob =&gt; 10001000</span><br><span class="line">	alice 不操作</span><br><span class="line">	Bob =&gt; 1000</span><br></pre></td></tr></table></figure>

<p>所以3次操作来说 已经说明了，Alice如果只是简单的平衡左右1的个数的话，显然是没有局部最优性的</p>
<p>但如果只有1次操作，那么alice就应该直接平衡成 左右都是7个了</p>
<p>这里说明了最终次数t也影响 他们的决策</p>
<p>没啥想法，一个想法是直接暴力</p>
<p>也就是 f(状态，次数)&#x3D;true&#x2F;false(能否留下1)，而这里状态可能需要一个长度幂次标识</p>
<p>所以大概是 O(k^2 2^k)的状态</p>
<p>然后转移的话 最多 (k&#x2F;2)^2 （把1移动到0）种</p>
<p>这样感觉就TLE了</p>
<p>如果只看状态的话$k^2 2^k$ 似乎还可以卡一卡，特别是 这里长度标识应该是标不满的</p>
<p>$\sum_{i&#x3D;1}^{20} i 2^i &#x3D; 3984,5890$</p>
<p>所以 如果转移能 优化效率那就更好了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">f(s)=f(s_left+s_right)</span><br><span class="line">= for 移动方案</span><br><span class="line">	or (f(方案s_left) and f(方案s_right))</span><br><span class="line">= (for 左向右移动) or (for 右向左移动) or (for 左不动右内部) or (for 右不动左内部移动)</span><br><span class="line"></span><br><span class="line">因为 括号内 是and，外部是or,所以 需要两侧都是true 才能对外部贡献</span><br><span class="line"></span><br><span class="line">(for 左向右移动) 和 (for 左不动右内部) 都需要 f(s_left) = true, 因为如果原来左侧不动都没有方案，那么左侧少1个肯定更不行</span><br><span class="line"></span><br><span class="line">if f(s_left):</span><br><span class="line">	if f(s_right):</span><br><span class="line">		res = true;</span><br><span class="line">		break;</span><br><span class="line">	ok_left_sub1 = for f(s_left 移出1个) 存在true</span><br><span class="line">	ok_right_add1 = for f(s_right 移入1个) 存在true</span><br><span class="line">	if ok_left_sub1 and ok_right_add1:</span><br><span class="line">		res = true;</span><br><span class="line">		break</span><br><span class="line">	if not ok_right_add1:</span><br><span class="line">		// 不可能 因为 增加1个都不行，那么调整位置肯定也不行</span><br><span class="line">	else: </span><br><span class="line">		// 这种就是 左侧不动可以，少1个不行，右侧直接不行，右侧增加1个可以，不知道调整位置是否可以</span><br><span class="line">		// 然而这种状态数可以达到 (n/4)^2 = 25 个左右</span><br><span class="line">		for s_right调整位置 存在true</span><br><span class="line"></span><br><span class="line">右侧对称同理</span><br></pre></td></tr></table></figure>


<p>感觉这样的话，不知道是TLE还是卡着时间线能过？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">再整理</span><br><span class="line"></span><br><span class="line">if f(s_left) and f(s_right): 都不动就可以</span><br><span class="line">	true</span><br><span class="line">	break</span><br><span class="line"></span><br><span class="line">if not f(s_left) and not f(s_right): 不动都不行，然而要么一侧不动要么一侧少一个始终不行</span><br><span class="line">	false</span><br><span class="line">	break</span><br><span class="line"></span><br><span class="line">// 那么无非是</span><br><span class="line">//   1. 可以的 向不可以的 转移1个， 两边都可以 存在f(可以-1)==true and f(不可以+1) == true</span><br><span class="line">//   2. 存在 f(不可以+1) == true</span><br><span class="line">//          且存在 f(不可以 内部调整1) == true</span><br></pre></td></tr></table></figure>

<h3 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h3><p>一样的二分转化</p>
<p>只是变成了 t+1层的树，Bob从根向下走，而Alice可以交换数组中两个位置的值</p>
<ul>
<li>叶子节点对应长度$2^{n-t}$的 数组区间</li>
<li>Alice要做的就是 让最后到达的叶子对应的区间里有1</li>
<li>Bob就是要让对应区间里没有1（记作 deficient 叶子）</li>
<li>那么有多于1个1的leaf可以贡献额外的1</li>
<li>如果 在走到节点p时的操作，在p的任意祖先节点也可以操作，<ul>
<li>这个观察，让我们考虑 从下向上思考</li>
<li>记录 每个节点 对应的 deficient 叶子个数和可以借用的额外1的个数</li>
<li>那么 如果当前位置的 (deficient,可借用) 都非0,则完成1次转移，并把剩余的向上传递</li>
<li>那么 alice 需要在 根部时 为deficient&#x3D;0 才能获胜</li>
</ul>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>VP了这场（5198分 大概2172的表现（如果实际打会掉分）），前面题卡了有点久，还WA了一发D</p>
<p>A(7min)</p>
<p>B(19min)</p>
<p>C(38min)</p>
<p>D(51min), WA+1</p>
<p>E(32min)</p>
<p>F(62min): 超时29min 自己做出来了</p>
<p>G:</p>
<p>戴江齐 大佬的这个数学直觉法，简单暴力有效啊！！</p>
<p>像待定系数法的感觉，又很帅，而且这里 拆g的时候 拆成从0到di的和 也很有意思，这样变成2次类和的话， 转换时不会剩余4项而只会剩余2项</p>
<p>我也把 round 641 D的题解文字补了</p>
<p>H:</p>
<p>一样的二分转化，但是后续的 树型没建立出来，在想记忆化DP，</p>
<p>而这个树型转化，其实核心还是引出了倒着想的（自下向上的想法）</p>
<p>I: TODO</p>
<p><a target="_blank" rel="noopener" href="https://codeforces.com/blog/entry/128116">官方题解</a></p>
<hr>
<p>对我来说，H看上去 比G简单，二分很自然，这个树型转化自己也应该要能想到的。哎。</p>
<p>不过H的收获很大，感觉概率论如果有这个方法的话，似乎能搞的题增多了不少，但其数学原理感觉还是不透彻，因为还是有可能制造出的表达式虽然满足但是过于复杂产生过拟合一样的效果吗？？？</p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>作者： </strong>Xiao Ye
  </li>
  <li class="post-copyright-link">
      <strong>文章連結：</strong>
      <a href="https://yexiaorain.github.io/Blog/cf/1951/" title="Codeforces Global Round 25">https://yexiaorain.github.io/Blog/cf/1951/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版權聲明： </strong>本網誌所有文章除特別聲明外，均採用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 許可協議。轉載請註明出處！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/Blog/tags/%E4%BA%8C%E5%88%86/" rel="tag"><i class="fa fa-tag"></i> 二分</a>
              <a href="/Blog/tags/%E6%A0%91/" rel="tag"><i class="fa fa-tag"></i> 树</a>
              <a href="/Blog/tags/%E6%A6%82%E7%8E%87%E8%AE%BA/" rel="tag"><i class="fa fa-tag"></i> 概率论</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Blog/cf/1942/" rel="prev" title="CodeTON Round 8 (Div. 1 + Div. 2, Rated, Prizes!)">
                  <i class="fa fa-chevron-left"></i> CodeTON Round 8 (Div. 1 + Div. 2, Rated, Prizes!)
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Blog/atcoder/abc/351/" rel="next" title="Atcoder abc351">
                  Atcoder abc351 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xiao Ye</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="總字數">587k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="所需總閱讀時間">32:38</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 強力驅動
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="回到頂端">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/Blog/js/comments.js"></script><script src="/Blog/js/utils.js"></script><script src="/Blog/js/schemes/muse.js"></script><script src="/Blog/js/next-boot.js"></script><script src="/Blog/js/bookmark.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/Blog/js/third-party/search/local-search.js"></script>






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/Blog/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":false,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://yexiaorain.github.io/Blog/cf/1951/"}</script>
  <script src="/Blog/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"yexiaorain","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/Blog/js/third-party/comments/disqus.js"></script>

</body>
</html>
